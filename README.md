# svg-quick

`svg-quick` æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œèƒ½å°†ä½ çš„ SVG å›¾æ ‡æ–‡ä»¶å¤¹å¿«é€Ÿæ‰“åŒ…æˆä¸€ä¸ªé«˜æ•ˆçš„ã€å®Œå…¨æ”¯æŒ Tree-shaking çš„ JavaScript/TypeScript æ¨¡å—ã€‚å‘Šåˆ«ç¹ççš„ SVG ç®¡ç†ï¼Œæ‹¥æŠ±ç°ä»£åŒ–çš„å›¾æ ‡å·¥ä½œæµã€‚

## ğŸ¤” ä¸ºä»€ä¹ˆé€‰æ‹© svg-quick? (Why svg-quick?)

åœ¨ç°ä»£å‰ç«¯é¡¹ç›®ä¸­ï¼Œç®¡ç†å’Œä½¿ç”¨ SVG å›¾æ ‡å¸¸å¸¸é¢ä¸´è¯¸å¤šæŒ‘æˆ˜ï¼š

- **æ€§èƒ½é—®é¢˜**: å¤§é‡ç‹¬ç«‹çš„ SVG æ–‡ä»¶ä¼šå¯¼è‡´è¿‡å¤šçš„ HTTP è¯·æ±‚ã€‚
- **æ‰“åŒ…æ•ˆç‡**: åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæ¯æ¬¡æ„å»ºéƒ½å®æ—¶å¤„ç†ä¸Šç™¾ä¸ª SVG ä¼šæ‹–æ…¢æ„å»ºé€Ÿåº¦ã€‚
- **ä½“ç§¯é—®é¢˜**: ä½œä¸º React/Vue ç»„ä»¶ç›´æ¥å¯¼å…¥ä¼šå¢åŠ é¢å¤–çš„è¿è¡Œæ—¶ä»£ç ï¼Œå¯¼è‡´äº§ç‰©ä½“ç§¯è†¨èƒ€ã€‚
- **çµæ´»æ€§å·®**: ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼ˆå¦‚ `<img>` æ ‡ç­¾, CSS `background`, æ•°æ®å¯è§†åŒ–åº“ EChartsï¼‰éœ€è¦ä¸åŒæ ¼å¼çš„å›¾æ ‡ã€‚

`svg-quick` æ­£æ˜¯ä¸ºè§£å†³è¿™äº›ç—›ç‚¹è€Œç”Ÿï¼Œå®ƒä¸ºä½ å¸¦æ¥ï¼š

- **âš¡ï¸ æè‡´æ€§èƒ½**: é€šè¿‡é¢„æ„å»ºï¼Œæå¤§æå‡é¡¹ç›®æ„å»ºé€Ÿåº¦ã€‚æ‰€æœ‰å›¾æ ‡æ‰“åŒ…ä¸ºå•ä¸€æ¨¡å—ï¼Œç» Gzip å‹ç¼©åä½“ç§¯æ›´å°ã€‚
- **ğŸŒ³ å®Œç¾æŒ‰éœ€æ‰“åŒ… (Tree-shaking)**: åªå°†ä½ å®é™…ä½¿ç”¨åˆ°çš„å›¾æ ‡æ‰“åŒ…è¿›æœ€ç»ˆäº§ç‰©ï¼Œç¡®ä¿åŒ…ä½“ç§¯æœ€å°åŒ–ã€‚
- **âœ¨ é«˜åº¦çµæ´»æ€§**: æä¾›å¤šç§è¾“å‡ºæ¨¡å¼ï¼Œä½ å¯ä»¥é€‰æ‹©ç”ŸæˆæŒ‰éœ€æ‰“åŒ…çš„ç‹¬ç«‹å¯¼å‡ºï¼Œæˆ–è€…åŒ…å«æ‰€æœ‰å›¾æ ‡çš„å…¨é‡å¯¹è±¡ï¼Œæ»¡è¶³ä»»ä½•ä½¿ç”¨åœºæ™¯ã€‚
- **ğŸ’» ä¼˜ç§€çš„å¼€å‘ä½“éªŒ**: æä¾›ç»Ÿä¸€çš„ API å’Œå®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼Œäº«å—å®Œç¾çš„è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥ã€‚
- **ğŸ”§ å¼ºå¤§çš„ä¼˜åŒ–**: å†…ç½® `svgo`ï¼Œåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­è‡ªåŠ¨å¯¹æ‰€æœ‰ SVG è¿›è¡Œæ·±åº¦å‹ç¼©å’Œä¼˜åŒ–ï¼Œç¡®ä¿ä»£ç ä¸€è‡´æ€§å’Œé«˜è´¨é‡ã€‚

## ğŸ“¦ å®‰è£… (Installation)

æ¨èä½¿ç”¨ `npx` åœ¨é¡¹ç›®ä¸­æŒ‰éœ€æ‰§è¡Œï¼Œæ— éœ€å…¨å±€å®‰è£…ã€‚

```bash
# æ— éœ€å®‰è£…ï¼Œç›´æ¥é€šè¿‡ npx è¿è¡Œ
npx svg-quick --input ./svgs --output ./dist
```

å¦‚æœä½ å¸Œæœ›å…¨å±€å®‰è£…ï¼š

```bash
npm install -g svg-quick
```

## ğŸš€ ä½¿ç”¨æ–¹æ³• (Usage)

å‡è®¾ä½ çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```
my-project/
â”œâ”€â”€ svgs/
â”‚   â”œâ”€â”€ user.svg
â”‚   â”œâ”€â”€ arrow-left.svg
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

1.  åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

    ```bash
    npx svg-quick -i ./svgs -o ./src/generated-icons -m t
    ```

2.  `svg-quick` å°†ä¼šå¤„ç† `svgs` ç›®å½•ä¸‹çš„æ‰€æœ‰å›¾æ ‡ï¼Œå¹¶ç”Ÿæˆä¼˜åŒ–åçš„æ¨¡å—åˆ° `src/generated-icons` ç›®å½•ã€‚

## âš™ï¸ å‘½ä»¤è¡Œå‚æ•° (API)

| å‚æ•°       | ç®€å†™ | æè¿°                     | å¯é€‰å€¼                                  | é»˜è®¤å€¼   |
| :--------- | :--- | :----------------------- | :-------------------------------------- | :------- |
| `--input`  | `-i` | åŒ…å«æº SVG æ–‡ä»¶çš„ç›®å½•ã€‚  | (è·¯å¾„)                                  | **å¿…éœ€** |
| `--output` | `-o` | ç”Ÿæˆäº§ç‰©æ¨¡å—çš„è¾“å‡ºç›®å½•ã€‚ | (è·¯å¾„)                                  | **å¿…éœ€** |
| `--mode`   | `-m` | è¾“å‡ºæ¨¡å¼ã€‚               | `all`(a), `treeshakeable`(t), `full`(f) | `all`    |

**æ¨¡å¼ (Mode) è¯¦è§£:**

- `treeshakeable` (`t`): **ï¼ˆæ¨èï¼‰** ç”Ÿæˆæ”¯æŒæŒ‰éœ€æ‰“åŒ…çš„ç‹¬ç«‹å¯¼å‡ºï¼ŒåŒæ—¶åŒ…å«å®ç”¨å·¥å…·å‡½æ•° (`getIconData`, `getIconSrc`)ã€‚æ”¯æŒ Tree-shakingï¼Œæœ€ç»ˆäº§ç‰©ä½“ç©æœ€å°ã€‚
- `full` (`f`): åªç”ŸæˆåŒ…å«æ‰€æœ‰å›¾æ ‡çš„å…¨é‡å¯¹è±¡å’Œå®ç”¨å·¥å…·å‡½æ•° (`getIconData`, `getIconSrc`)ã€‚æ‰€æœ‰å›¾æ ‡éƒ½ä¼šè¢«æ‰“åŒ…ï¼Œé€‚ç”¨äºéœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€è®¿é—®å¤§é‡å›¾æ ‡çš„åœºæ™¯ã€‚
- `all` (`a`): åŒæ—¶ç”Ÿæˆä»¥ä¸Šä¸¤ç§æ¨¡å¼çš„æ–‡ä»¶ï¼Œæä¾›æœ€å¤§çµæ´»æ€§ã€‚

> **ğŸ’¡ æç¤º**: ä¸¤ç§æ¨¡å¼éƒ½åŒ…å«ç›¸åŒçš„å®ç”¨å·¥å…·å‡½æ•°ã€‚åŒºåˆ«åœ¨äºï¼š
>
> - `treeshakeable` æ¨¡å¼ï¼šæ”¯æŒæŒ‰éœ€å¯¼å…¥å•ä¸ªå›¾æ ‡ï¼Œæ‰“åŒ…å·¥å…·åªä¼šåŒ…å«ä½ å®é™…ä½¿ç”¨çš„å›¾æ ‡
> - `full` æ¨¡å¼ï¼šæ‰€æœ‰å›¾æ ‡éƒ½ä¼šè¢«æ‰“åŒ…åˆ°æœ€ç»ˆäº§ç‰©ä¸­ï¼Œä½†æä¾›äº†ç»Ÿä¸€çš„ `icons` å¯¹è±¡ç”¨äºåŠ¨æ€è®¿é—®

## ğŸ“– äº§ç‰©ä½¿ç”¨ç¤ºä¾‹ (Using the Output)

å½“ `mode` è®¾ç½®ä¸º `treeshakeable` (æ¨è) æ—¶ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š

### æ–¹å¼ä¸€ï¼šç›´æ¥å¯¼å…¥å…·ä½“å›¾æ ‡ï¼ˆæ¨èï¼‰

```javascript
// åœ¨ä½ çš„ React / Vue / Svelte ç»„ä»¶ä¸­
import { user, arrowLeft } from '../generated-icons';

// 'user' å’Œ 'arrowLeft' éƒ½æ˜¯ä¼˜åŒ–åçš„ SVG å­—ç¬¦ä¸²
// ä½ å¯ä»¥è½»æ¾åœ°å°è£…æˆè‡ªå·±çš„ <Icon> ç»„ä»¶

// React ç¤ºä¾‹:
const Icon = ({ svgString, ...props }) => (
  <span {...props} dangerouslySetInnerHTML={{ __html: svgString }} />
);

const App = () => (
  <div>
    <Icon svgString={user} style={{ color: 'blue' }} />
    <Icon svgString={arrowLeft} style={{ color: 'red' }} />
  </div>
);
```

### æ–¹å¼äºŒï¼šä½¿ç”¨å®ç”¨å·¥å…·å‡½æ•°

```javascript
// å¯¼å…¥å®ç”¨å·¥å…·å‡½æ•°ï¼Œæ”¯æŒåŠ¨æ€è·å–å›¾æ ‡
import { getIconData, getIconSrc } from '../generated-icons';

// è·å– SVG å­—ç¬¦ä¸²
const userIconSvg = getIconData('user');

// è·å– base64 ç¼–ç çš„ data URLï¼Œå¯ç›´æ¥ç”¨äº <img> æ ‡ç­¾æˆ– CSS background
const userIconSrc = getIconSrc('user');

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
const DynamicIcon = ({ iconName }) => {
  const iconSrc = getIconSrc(iconName);
  return iconSrc ? <img src={iconSrc} alt={iconName} /> : null;
};

// æˆ–è€…åœ¨ CSS ä¸­ä½¿ç”¨
const iconUrl = getIconSrc('user');
// background-image: url(data:image/svg+xml;base64,...)
```

### æ–¹å¼ä¸‰ï¼šåœ¨ ECharts ä¸­ä½¿ç”¨å›¾æ ‡

```javascript
// å¯¼å…¥ ECharts å’Œå›¾æ ‡å·¥å…·å‡½æ•°
import * as echarts from 'echarts';
import { getIconSrc } from '../generated-icons';

// åœ¨ ECharts é…ç½®ä¸­ä½¿ç”¨å›¾æ ‡
const option = {
  // 1. åœ¨ç³»åˆ—æ•°æ®ä¸­ä½¿ç”¨å›¾æ ‡ä½œä¸º symbol
  series: [
    {
      type: 'scatter',
      data: [
        { value: [10, 20], symbol: getIconSrc('user') },
        { value: [30, 40], symbol: getIconSrc('star') },
      ],
      symbolSize: 30,
    },
  ],

  // 2. åœ¨å›¾ä¾‹ä¸­ä½¿ç”¨è‡ªå®šä¹‰å›¾æ ‡
  legend: {
    data: [
      {
        name: 'ç”¨æˆ·æ•°æ®',
        icon: getIconSrc('user'),
      },
      {
        name: 'æ”¶è—æ•°æ®',
        icon: getIconSrc('star'),
      },
    ],
  },

  // 3. åœ¨å·¥å…·ç®±ä¸­ä½¿ç”¨è‡ªå®šä¹‰å›¾æ ‡
  toolbox: {
    feature: {
      myTool: {
        show: true,
        title: 'è‡ªå®šä¹‰å·¥å…·',
        icon: getIconSrc('settings'),
        onclick: function () {
          console.log('è‡ªå®šä¹‰å·¥å…·è¢«ç‚¹å‡»');
        },
      },
    },
  },

  // 4. åœ¨æ ‡è®°ç‚¹ä¸­ä½¿ç”¨å›¾æ ‡
  series: [
    {
      type: 'line',
      data: [120, 200, 150, 80, 70, 110, 130],
      markPoint: {
        data: [
          {
            type: 'max',
            symbol: getIconSrc('arrowUp'),
            symbolSize: 25,
          },
          {
            type: 'min',
            symbol: getIconSrc('arrowDown'),
            symbolSize: 25,
          },
        ],
      },
    },
  ],
};

// åˆå§‹åŒ–å›¾è¡¨
const chart = echarts.init(document.getElementById('chart'));
chart.setOption(option);
```

å½“æ‰“åŒ…å·¥å…·æ„å»ºä½ çš„åº”ç”¨æ—¶ï¼Œåªæœ‰è¢« `import` çš„å›¾æ ‡å’Œå‡½æ•°ä¼šè¢«åŒ…å«è¿›æ¥ï¼Œå®ç°å®Œç¾çš„æŒ‰éœ€æ‰“åŒ…ã€‚

## ğŸ“„ è®¸å¯è¯ (License)

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](https://github.com/King-GD/svg-quick/blob/main/LICENSE) è®¸å¯è¯ã€‚
